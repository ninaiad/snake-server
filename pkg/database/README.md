# Database


На данном уровне программы, происходит работа с СУБД: подключение к ней (а именно к отдельному приложению PostgreSQL, обернутому в Docker контейнер), инициализация базы данных с помощью файлов миграций, а также модификация ее содержимого, согласно запросам клиента после их обработки на уровне Service.

Запросы в СУБД происходит при помощи CRUD-операций (акроним, обозначающий четыре базовые функции: создание (англ. create), чтение (англ. read), модификация (англ. update), удаление (англ. delete)). Такой подход хорошо соответствует выбранному REST API всего приложения, так как функции CRUD легко выражаются через HTTP запросы POST, GET, PATCH и DELETE.

Для работы с PostgreSQL используется две библиотеки для Go: `sqlx`, которая обладает более широким функционалом и удобным интерфейсом, чем нативная `database/sql` из стандартной библиотеки языка, и `migrate`, с помощью которой можно автоматически мигрировать базы данных в самой программе, что значительно упрощает общую сборку и запуск системы в целом.

---
### > database.go

В этом файле инициализируется данная компонента, а также описаны все общие для этого уровня интерфейсы и структуры.

### > postgres.go

Здесь реализовано подключение к СУБД и применение миграций (см. файлы в директории `migration_files`).

### > auth.go & scores.go

Тут обрабатываются запросы, переданные из уровня выше - Service, производятся соответствующие записи в базу данных.
